(function(n){"use strict";function u(t){var i=t.data;t.isDefaultPrevented()||(t.preventDefault(),n(this).ajaxSubmit(i))}function f(t){var r=t.target,u=n(r),f,i,e;if(!u.is("[type=submit],[type=image]")){if(f=u.closest("[type=submit]"),f.length===0)return;r=f[0]}i=this;i.clk=r;r.type=="image"&&(t.offsetX!==undefined?(i.clk_x=t.offsetX,i.clk_y=t.offsetY):typeof n.fn.offset=="function"?(e=u.offset(),i.clk_x=t.pageX-e.left,i.clk_y=t.pageY-e.top):(i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop));setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function t(){if(n.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var i={},r;i.fileapi=n("<input type='file'/>").get(0).files!==undefined;i.formdata=window.FormData!==undefined;r=!!n.fn.prop;n.fn.attr2=function(){if(!r)return this.attr.apply(this,arguments);var n=this.prop.apply(this,arguments);return n&&n.jquery||typeof n=="string"?n:this.attr.apply(this,arguments)};n.fn.ajaxSubmit=function(u){function ot(t){for(var r=n.param(t,u.traditional).split("&"),o=r.length,e=[],f,i=0;i<o;i++)r[i]=r[i].replace(/\+/g," "),f=r[i].split("="),e.push([decodeURIComponent(f[0]),decodeURIComponent(f[1])]);return e}function st(t){for(var e=new FormData,f,r,o,i=0;i<t.length;i++)e.append(t[i].name,t[i].value);if(u.extraData)for(f=ot(u.extraData),i=0;i<f.length;i++)f[i]&&e.append(f[i][0],f[i][1]);return u.data=null,r=n.extend(!0,{},n.ajaxSettings,u,{contentType:!1,processData:!1,cache:!1,type:h||"POST"}),u.uploadProgress&&(r.xhr=function(){var t=n.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(n){var t=0,i=n.loaded||n.position,r=n.total;n.lengthComputable&&(t=Math.ceil(i/r*100));u.uploadProgress(n,i,r,t)},!1),t}),r.data=null,o=r.beforeSend,r.beforeSend=function(n,t){t.data=e;o&&o.call(this,n,t)},n.ajax(r)}function ft(i){function ot(n){var i=null;try{n.contentWindow&&(i=n.contentWindow.document)}catch(r){t("cannot get iframe.contentWindow document: "+r)}if(i)return i;try{i=n.contentDocument?n.contentDocument:n.document}catch(r){t("cannot get iframe.contentDocument: "+r);i=n.document}return i}function st(){function s(){try{var n=ot(a).readyState;t("state = "+n);n&&n.toLowerCase()=="uninitialized"&&setTimeout(s,50)}catch(i){t("Server abort: ",i," (",i.name,")");b(tt);g&&clearTimeout(g);g=undefined}}var u=f.attr2("target"),o=f.attr2("action"),r,i,c;l.setAttribute("target",d);h||l.setAttribute("method","POST");o!=e.url&&l.setAttribute("action",e.url);e.skipEncodingOverride||h&&!/post/i.test(h)||f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});e.timeout&&(g=setTimeout(function(){rt=!0;b(ut)},e.timeout));r=[];try{if(e.extraData)for(i in e.extraData)e.extraData.hasOwnProperty(i)&&(n.isPlainObject(e.extraData[i])&&e.extraData[i].hasOwnProperty("name")&&e.extraData[i].hasOwnProperty("value")?r.push(n('<input type="hidden" name="'+e.extraData[i].name+'">').val(e.extraData[i].value).appendTo(l)[0]):r.push(n('<input type="hidden" name="'+i+'">').val(e.extraData[i]).appendTo(l)[0]));e.iframeTarget||(v.appendTo("body"),a.attachEvent?a.attachEvent("onload",b):a.addEventListener("load",b,!1));setTimeout(s,15);try{l.submit()}catch(y){c=document.createElement("form").submit;c.apply(l)}}finally{l.setAttribute("action",o);u?l.setAttribute("target",u):f.removeAttr("target");n(r).remove()}}function b(i){var r,u,w,f,k,d,h,c,l;if(!o.aborted&&!lt){if(s=ot(a),s||(t("cannot access response document"),i=tt),i===ut&&o){o.abort("timeout");y.reject(o,"timeout");return}if(i==tt&&o){o.abort("server abort");y.reject(o,"error","server abort");return}if(s&&s.location.href!=e.iframeSrc||rt){a.detachEvent?a.detachEvent("onload",b):a.removeEventListener("load",b,!1);r="success";try{if(rt)throw"timeout";if(w=e.dataType=="xml"||s.XMLDocument||n.isXMLDoc(s),t("isXml="+w),!w&&window.opera&&(s.body===null||!s.body.innerHTML)&&--ct){t("requeing onLoad callback, DOM not available");setTimeout(b,250);return}f=s.body?s.body:s.documentElement;o.responseText=f?f.innerHTML:null;o.responseXML=s.XMLDocument?s.XMLDocument:s;w&&(e.dataType="xml");o.getResponseHeader=function(n){var t={"content-type":e.dataType};return t[n]};f&&(o.status=Number(f.getAttribute("status"))||o.status,o.statusText=f.getAttribute("statusText")||o.statusText);k=(e.dataType||"").toLowerCase();d=/(json|script|text)/.test(k);d||e.textarea?(h=s.getElementsByTagName("textarea")[0],h?(o.responseText=h.value,o.status=Number(h.getAttribute("status"))||o.status,o.statusText=h.getAttribute("statusText")||o.statusText):d&&(c=s.getElementsByTagName("pre")[0],l=s.getElementsByTagName("body")[0],c?o.responseText=c.textContent?c.textContent:c.innerText:l&&(o.responseText=l.textContent?l.textContent:l.innerText))):k=="xml"&&!o.responseXML&&o.responseText&&(o.responseXML=at(o.responseText));try{ht=yt(o,k,e)}catch(nt){r="parsererror";o.error=u=nt||r}}catch(nt){t("error caught: ",nt);r="error";o.error=u=nt||r}o.aborted&&(t("upload aborted"),r=null);o.status&&(r=o.status>=200&&o.status<300||o.status===304?"success":"error");r==="success"?(e.success&&e.success.call(e.context,ht,"success",o),y.resolve(o.responseText,"success",o),p&&n.event.trigger("ajaxSuccess",[o,e])):r&&(u===undefined&&(u=o.statusText),e.error&&e.error.call(e.context,o,r,u),y.reject(o,"error",u),p&&n.event.trigger("ajaxError",[o,e,u]));p&&n.event.trigger("ajaxComplete",[o,e]);p&&!--n.active&&n.event.trigger("ajaxStop");e.complete&&e.complete.call(e.context,o,r);lt=!0;e.timeout&&clearTimeout(g);setTimeout(function(){e.iframeTarget||v.remove();o.responseXML=null},100)}}}var l=f[0],it,nt,e,p,d,v,a,o,k,w,rt,g,y=n.Deferred(),ut,tt,ft,et,ht,s,ct,lt;if(i)for(nt=0;nt<c.length;nt++)it=n(c[nt]),r?it.prop("disabled",!1):it.removeAttr("disabled");if(e=n.extend(!0,{},n.ajaxSettings,u),e.context=e.context||e,d="jqFormIO"+(new Date).getTime(),e.iframeTarget?(v=n(e.iframeTarget),w=v.attr2("name"),w?d=w:v.attr2("name",d)):(v=n('<iframe name="'+d+'" src="'+e.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),a=v[0],o={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(i){var r=i==="timeout"?"timeout":"aborted";t("aborting upload... "+r);this.aborted=1;try{a.contentWindow.document.execCommand&&a.contentWindow.document.execCommand("Stop")}catch(u){}v.attr("src",e.iframeSrc);o.error=r;e.error&&e.error.call(e.context,o,r,i);p&&n.event.trigger("ajaxError",[o,e,r]);e.complete&&e.complete.call(e.context,o,r)}},p=e.global,p&&0==n.active++&&n.event.trigger("ajaxStart"),p&&n.event.trigger("ajaxSend",[o,e]),e.beforeSend&&e.beforeSend.call(e.context,o,e)===!1)return e.global&&n.active--,y.reject(),y;if(o.aborted)return y.reject(),y;k=l.clk;k&&(w=k.name,w&&!k.disabled&&(e.extraData=e.extraData||{},e.extraData[w]=k.value,k.type=="image"&&(e.extraData[w+".x"]=l.clk_x,e.extraData[w+".y"]=l.clk_y)));ut=1;tt=2;ft=n("meta[name=csrf-token]").attr("content");et=n("meta[name=csrf-param]").attr("content");et&&ft&&(e.extraData=e.extraData||{},e.extraData[et]=ft);e.forceSync?st():setTimeout(st,10);ct=50;var at=n.parseXML||function(n,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(n)):t=(new DOMParser).parseFromString(n,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},vt=n.parseJSON||function(s){return window.eval("("+s+")")},yt=function(t,i,r){var f=t.getResponseHeader("content-type")||"",e=i==="xml"||!i&&f.indexOf("xml")>=0,u=e?t.responseXML:t.responseText;return e&&u.documentElement.nodeName==="parsererror"&&n.error&&n.error("parsererror"),r&&r.dataFilter&&(u=r.dataFilter(u,i)),typeof u=="string"&&(i==="json"||!i&&f.indexOf("json")>=0?u=vt(u):(i==="script"||!i&&f.indexOf("javascript")>=0)&&n.globalEval(u)),u};return y}var h,b,e,f,a,v,c,y,o,l,s,d,g,nt,ut,p,w;if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;if(f=this,typeof u=="function"&&(u={success:u}),h=u.type||this.attr2("method"),b=u.url||this.attr2("action"),e=typeof b=="string"?n.trim(b):"",e=e||window.location.href||"",e&&(e=(e.match(/^([^#]+)/)||[])[1]),u=n.extend(!0,{url:e,success:n.ajaxSettings.success,type:h||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},u),a={},this.trigger("form-pre-serialize",[this,u,a]),a.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(u.beforeSerialize&&u.beforeSerialize(this,u)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;if(v=u.traditional,v===undefined&&(v=n.ajaxSettings.traditional),c=[],o=this.formToArray(u.semantic,c),u.data&&(u.extraData=u.data,y=n.param(u.data,v)),u.beforeSubmit&&u.beforeSubmit(o,this,u)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[o,this,u,a]),a.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;l=n.param(o,v);y&&(l=l?l+"&"+y:y);u.type.toUpperCase()=="GET"?(u.url+=(u.url.indexOf("?")>=0?"&":"?")+l,u.data=null):u.data=l;s=[];u.resetForm&&s.push(function(){f.resetForm()});u.clearForm&&s.push(function(){f.clearForm(u.includeHidden)});!u.dataType&&u.target?(d=u.success||function(){},s.push(function(t){var i=u.replaceTarget?"replaceWith":"html";n(u.target)[i](t).each(d,arguments)})):u.success&&s.push(u.success);u.success=function(n,t,i){for(var o=u.context||this,r=0,e=s.length;r<e;r++)s[r].apply(o,[n,t,i||f,f])};u.error&&(g=u.error,u.error=function(n,t,i){var r=u.context||this;g.apply(r,[n,t,i,f])});u.complete&&(nt=u.complete,u.complete=function(n,t){var i=u.context||this;nt.apply(i,[n,t,f])});var et=n('input[type=file]:enabled[value!=""]',this),tt=et.length>0,it="multipart/form-data",rt=f.attr("enctype")==it||f.attr("encoding")==it,k=i.fileapi&&i.formdata;for(t("fileAPI :"+k),ut=(tt||rt)&&!k,u.iframe!==!1&&(u.iframe||ut)?u.closeKeepAlive?n.get(u.closeKeepAlive,function(){p=ft(o)}):p=ft(o):p=(tt||rt)&&k?st(o):n.ajax(u),f.removeData("jqxhr").data("jqxhr",p),w=0;w<c.length;w++)c[w]=null;return this.trigger("form-submit-notify",[this,u]),this};n.fn.ajaxForm=function(i){if(i=i||{},i.delegation=i.delegation&&n.isFunction(n.fn.on),!i.delegation&&this.length===0){var r={s:this.selector,c:this.context};return!n.isReady&&r.s?(t("DOM not ready, queuing ajaxForm"),n(function(){n(r.s,r.c).ajaxForm(i)}),this):(t("terminating; zero elements found by selector"+(n.isReady?"":" (DOM not ready)")),this)}if(i.delegation){n(document).off("submit.form-plugin",this.selector,u).off("click.form-plugin",this.selector,f).on("submit.form-plugin",this.selector,i,u).on("click.form-plugin",this.selector,i,f);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",i,u).bind("click.form-plugin",i,f)};n.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};n.fn.formToArray=function(t,r){var o=[],e,c,l,s,f,h,u,p,w,a,y,v;if(this.length===0||(e=this[0],c=t?e.getElementsByTagName("*"):e.elements,!c))return o;for(l=0,p=c.length;l<p;l++)if(u=c[l],f=u.name,f&&!u.disabled){if(t&&e.clk&&u.type=="image"){e.clk==u&&(o.push({name:f,value:n(u).val(),type:u.type}),o.push({name:f+".x",value:e.clk_x},{name:f+".y",value:e.clk_y}));continue}if(h=n.fieldValue(u,!0),h&&h.constructor==Array)for(r&&r.push(u),s=0,w=h.length;s<w;s++)o.push({name:f,value:h[s]});else if(i.fileapi&&u.type=="file")if(r&&r.push(u),a=u.files,a.length)for(s=0;s<a.length;s++)o.push({name:f,value:a[s],type:u.type});else o.push({name:f,value:"",type:u.type});else h!==null&&typeof h!="undefined"&&(r&&r.push(u),o.push({name:f,value:h,type:u.type,required:u.required}))}return!t&&e.clk&&(y=n(e.clk),v=y[0],f=v.name,f&&!v.disabled&&v.type=="image"&&(o.push({name:f,value:y.val()}),o.push({name:f+".x",value:e.clk_x},{name:f+".y",value:e.clk_y}))),o};n.fn.formSerialize=function(t){return n.param(this.formToArray(t))};n.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var f=this.name,r,u,e;if(f)if(r=n.fieldValue(this,t),r&&r.constructor==Array)for(u=0,e=r.length;u<e;u++)i.push({name:f,value:r[u]});else r!==null&&typeof r!="undefined"&&i.push({name:this.name,value:r})}),n.param(i)};n.fn.fieldValue=function(t){for(var f,i,r=[],u=0,e=this.length;u<e;u++)(f=this[u],i=n.fieldValue(f,t),i!==null&&typeof i!="undefined"&&(i.constructor!=Array||i.length))&&(i.constructor==Array?n.merge(r,i):r.push(i));return r};n.fieldValue=function(t,i){var a=t.name,u=t.type,h=t.tagName.toLowerCase(),e,o,r,f;if(i===undefined&&(i=!0),i&&(!a||t.disabled||u=="reset"||u=="button"||(u=="checkbox"||u=="radio")&&!t.checked||(u=="submit"||u=="image")&&t.form&&t.form.clk!=t||h=="select"&&t.selectedIndex==-1))return null;if(h=="select"){if(e=t.selectedIndex,e<0)return null;var c=[],l=t.options,s=u=="select-one",v=s?e+1:l.length;for(o=s?e:0;o<v;o++)if(r=l[o],r.selected){if(f=r.value,f||(f=r.attributes&&r.attributes.value&&!r.attributes.value.specified?r.text:r.value),s)return f;c.push(f)}return c}return n(t).val()};n.fn.clearForm=function(t){return this.each(function(){n("input,select,textarea",this).clearFields(t)})};n.fn.clearFields=n.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,u=this.tagName.toLowerCase();i.test(r)||u=="textarea"?this.value="":r=="checkbox"||r=="radio"?this.checked=!1:u=="select"?this.selectedIndex=-1:r=="file"?/MSIE/.test(navigator.userAgent)?n(this).replaceWith(n(this).clone(!0)):n(this).val(""):t&&(t===!0&&/hidden/.test(r)||typeof t=="string"&&n(this).is(t))&&(this.value="")})};n.fn.resetForm=function(){return this.each(function(){typeof this.reset!="function"&&(typeof this.reset!="object"||this.reset.nodeType)||this.reset()})};n.fn.enable=function(n){return n===undefined&&(n=!0),this.each(function(){this.disabled=!n})};n.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var r=this.type,i;r=="checkbox"||r=="radio"?this.checked=t:this.tagName.toLowerCase()=="option"&&(i=n(this).parent("select"),t&&i[0]&&i[0].type=="select-one"&&i.find("option").selected(!1),this.selected=t)})};n.fn.ajaxSubmit.debug=!1})(jQuery);Array.prototype.S=String.fromCharCode(2);Array.prototype.in_array=function(n){var t=new RegExp(this.S+n+this.S);return t.test(this.S+this.join(this.S)+this.S)};Array.prototype.dexOf=function(n){for(var t=0;t<this.length;t++)if(this[t]==n)return t;return-1};Array.prototype.remove=function(n){var t=this.dexOf(n);t>-1&&this.splice(t,1)};String.prototype.trim=function(){return this.replace(" ","")};var CusList={_array:[],_arrayEdit:[],_arrayCsuName:[],_cumList:0,_topNum:10,_type:0,_topCarNum:4,_aucIdList:null,_CusID:"",_Str:"",Init:function(){$("#custName").attr({maxlength:"10"});$("#delPopUp").hide();CusList.ConditionEvent();CusList.GetCumList();setInterval(CusList.Countdown,1e3)},ClearTopUl:function(n){var i=$(n).siblings().html(),t,r;for($(n).parent().remove(),t=0;t<$(".cur").length;t++)if(i==$(".cur").eq(t).html()){CusList._array.in_array(i)?$(".cur").eq(t).attr("tip")=="brand"?(CusList._array.length==2&&($("#"+CusList._array[1]).remove(),CusList._array.splice(0,CusList._array.length)),$(".subbrand-choice").eq(t).removeClass("cur"),$("#ulSeries").html(""),$("#ulBrand").html(""),$("#brandBuxian").addClass("cur"),$(".subbrand-change").removeClass("cur"),$(".subbrand").slideUp(),CusList._arrayEdit.splice(0,CusList._arrayEdit.length)):(CusList._array.remove(i.trim()),CusList._arrayEdit.remove(i.trim()),$("#ulSeries").children().removeClass("cur"),$("#ulSeries").children().eq(0).addClass("cur")):(r=$(".cur").eq(t),$(".cur").eq(t).parent().children(".cur").length==1?($(".cur").eq(t).parent().children().eq(0).addClass("cur"),r.removeClass("cur")):$(".cur").eq(t).removeClass("cur"));break}},AutoNameEvent:function(n){var t,h,e,u,r,f,s,i,o;if($(n).attr("tip")!=undefined&&$(n).hasClass("cur")){if(t="",h=0,$(".cur[tip='root']").eq(0).html()!="不限"&&(t+=$(".cur[tip='root']").eq(0).html()+" "),$(".cur[tip='year']").eq(0).html()!="不限"&&(t+=$(".cur[tip='year']").eq(0).html()+" "),$(".cur[tip='paifang']").eq(0).html()!="不限"&&(t+=$(".cur[tip='paifang']").eq(0).html()+" "),$(".cur[tip='regarea']").eq(0).html()!="不限"&&(t+=$(".cur[tip='regarea']").eq(0).html()+" "),$(".cur[tip='rankA']").eq(0).html()!=null&&(t+=$(".cur[tip='rankA']").eq(0).html()+" "),$(".cur[tip='rankB']").eq(0).html()!=null&&(t+=$(".cur[tip='rankB']").eq(0).html()+" "),e="",$(".cur[tip='brand']").html()!="不限"&&(e=$(".cur[tip='brand']").html(),t+=e),t=t.replace(/(^\s*)|(\s*$)/g,""),t.trim()=="")return!1;if(t.trim()==$("#editCusName").val())return $("#custName").val(t.trim()),!1;for(u="",r=[],r=t.split(" "),f=0,r.length>=3?(f=3,s=r[0]+" "+r[1]+" "+r[2],s.length>10&&(f=2)):f=r.length,i=0;i<f;i++)e!=""?i==f-1?(u+=e,u.length>10&&(u=f==2?e:r[0]+" "+e)):u+=r[i]+" ":i==f-1?(u+=r[i],u.length>10&&(u=f==2?r[0]:r[0]+" "+r[2])):u+=r[i]+" ";for(t=u.replace(/(^\s*)|(\s*$)/g,""),i=1;i<=10;i++)if(CusList._arrayCsuName.in_array(t))t=i==1?t.substring(0,t.length)+""+i+"":t.substring(0,t.length-1)+""+i+"",t.length>10&&(o=[],o=t.split(" "),o.length==3?t=o[1]+" "+o[2]:o.length==2&&(t=o[1]));else{(t==null||t=="null")&&(t="");$("#custName").val(t);break}}},BatchAddTopUI:function(n){for(var r="",i=$("[showTipCust='"+n+"']").children("span"),t=0;t<i.length;t++)r="<p id="+i.eq(t).html().trim()+"><span>"+i.eq(t).html()+'<\/span><i onclick="CusList.ClearTopUl(this)">×<\/i><\/p>',$("#topDiv").append(r)},BatchClearTopUl:function(n){if(n.length!=0){var i=$(n).html(),t=i.trim();$("#"+t+"").remove();CusList._array.remove(t)}},AddTopUI:function(n){var t="<p id="+n+"><span>"+n+'<\/span><i onclick="CusList.ClearTopUl(this)">×<\/i><\/p>';$("#topDiv").append(t)},ClearNameTopUl:function(n){$("#"+n.trim()+"").remove();CusList._array.length>0&&CusList._array.remove(n.trim());CusList._arrayEdit.length>0&&CusList._arrayEdit.remove(n.trim())},ConditionEvent:function(){$(".subchange>span").click(function(){var i=$(this).html(),t,r,u,n;if(i!="不限"&&$(this).parent().children(".cur").length==5&&!$(this).hasClass("cur"))return CusList.TipMessageEvent("最多选择5项"),!1;if($(this).toggleClass("cur").parent().children("span").eq(0).removeClass("cur"),t=$(this).parent().children(".cur").length,t||$(this).parent().children("span").eq(0).addClass("cur"),i!="不限"&&i.indexOf("选择品牌车系")==-1)$(this).hasClass("cur")?(r="<p id="+$(this).html()+"><span>"+$(this).html()+'<\/span><i onclick="CusList.ClearTopUl(this)">×<\/i><\/p>',$("#topDiv").append(r)):CusList.BatchClearTopUl(this);else for($(this).parent().children("span").removeClass("cur"),$(this).parent().children("span").eq(0).addClass("cur"),n=0;n<$(this).siblings("span").length;n++)CusList.BatchClearTopUl($(this).siblings("span").eq(n));if(u=$(this).parent().children("span").length,u==t+1)for($(this).parent().children("span").removeClass("cur"),$(this).parent().children("span").eq(0).addClass("cur"),n=0;n<=t;n++)CusList.BatchClearTopUl($(this).parent().children("span").eq(n));CusList.AutoNameEvent($(this))});$(".subchange").each(function(){$(this).children("span").eq(0).click(function(){$(this).addClass("cur").siblings().removeClass("cur")})});$("#ulWord li").click(function(){$(this).addClass("cur").siblings().removeClass("cur")});$(".subbrand-change").click(function(){$(".subbrand").is(":hidden")?($("#brandBuxian").removeClass("cur"),$(".subbrand-change").addClass("cur"),$(".subbrand").slideDown(),$(".transzoom").show()):(CusList._arrayEdit.length>0&&CusList.ClearNameTopUl(CusList._arrayEdit[0]),CusList._arrayEdit.length>0&&CusList.ClearNameTopUl(CusList._arrayEdit[0]),CusList._array.length>0&&CusList.ClearNameTopUl(CusList._array[0]),CusList._array.length>0&&CusList.ClearNameTopUl(CusList._array[0]),$(".subbrand-choice li").removeClass("cur"),$(".subbrand").slideUp(),$(".transzoom").hide(),$("#ulSeries").html(""),$("#ulBrand").children(".cur").removeClass("cur"),$("#brandBuxian").addClass("cur"),$(".subbrand-change").removeClass("cur"))});$("#brandBuxian").click(function(){$(".transzoom").hide();$(".subbrand").slideUp();CusList._array.length>0&&CusList.ClearNameTopUl(CusList._array[0]);CusList._array.length>0&&CusList.ClearNameTopUl(CusList._array[0]);$("#ulSeries").html("");$("#ulBrand").children(".cur").removeClass("cur");$("#brandBuxian").addClass("cur");$(".subbrand-change").removeClass("cur")});$(".subaddress,.subbrand").parent(".subchange").css("z-index",2)},GetCumList:function(){$.ajax({url:"/AjaxCustomization/GetCustomizationList",type:"post",async:!1,data:{topNum:CusList._topNum,topCarNum:CusList._topCarNum},dataType:"json",success:function(n){var t,i,r;if(n!=null)if(CusList._arrayCsuName.splice(0,CusList._arrayCsuName.length),CusList._cumList=n.length,t="",n.length!=0){for(CusList._cumList=n.length,i=0;i<CusList._cumList;i++)r=CusList.ShowCumListHTML(n,i),t=t+r;$("#custList").html(t);CusList.BindCarList(n)}else $("#custList").html('<div id="noList" class="nocar tac fs16">快来订阅车辆吧，不错过心仪车辆~<\/div>')}})},TipMessageEvent:function(n){$("#TipPopUp").show();$("#TipPopUp").css("z-index",1e4);$("#pTipMessage").html(n)},AddCum:function(){if($("#editCusId").val(""),$("#editCusName").val(""),CusList._cumList==CusList._topNum-1&&CusList.GetCumList(),CusList._cumList+1>CusList._topNum)return CusList.TipMessageEvent("您的"+CusList._topNum+"条订阅已用完"),!1;CusList._arrayEdit.splice(0,CusList._arrayEdit.length);$("#addPopUp").show()},EditCum:function(n){$("#addPopUp").show();CusList.ShowEditEvent(n)},ShowEditEvent:function(n){var u,f,i,r,t;CusList._arrayEdit.splice(0,CusList._arrayEdit.length);u=$(n).attr("tipCustName");f=$(n).attr("tipCustId");$("#custName").val(u);$("#editCusName").val(u);$("#editCusId").val(f);i=$(n).attr("tipBrand");r=$(n).attr("tipSName");r!=""&&i!=""?(CusList._array.push(i),CusList._array.push(r.trim()),CusList._arrayEdit.push(i),CusList._arrayEdit.push(r.trim()),CusList.GetBrandEdit(i),CusList.GetSeriesEdit(i,r)):i!=""&&(CusList._array.push(i),CusList._arrayEdit.push(i),CusList.GetBrandEdit(i),CusList.GetSeriesEdit(i,"不限"));(r!=""||i!="")&&($("#brandBuxian").removeClass("cur"),$(".subbrand-change").addClass("cur"));var o=$(n).attr("tipRankA"),s=$(n).attr("tipRankB"),h=$(n).attr("tipReg"),c=$(n).attr("tipPaifang"),e=$(n).attr("tipYear"),l=$(n).attr("tipRoot");o!=""&&(t=CusList.Split(o,","),CusList.GetChangeClass(t,"rankA"));s!=""&&(t=CusList.Split(s,","),CusList.GetChangeClass(t,"rankB"));h!=""&&(t=CusList.Split(h,","),CusList.GetChangeClass(t,"regarea"));c!=""&&(t=CusList.Split(c,","),CusList.GetChangeClass(t,"paifang"));e!="0"&&e!=""&&(t=CusList.Split(e,","),CusList.GetChangeClass(t,"year"));l!=""&&(t=CusList.Split(l,","),CusList.GetChangeClass(t,"root"));CusList.BatchAddTopUI(f)},GetChangeClass:function(n,t){for(var i=0;i<n.length;i++)$("span[tip='"+t+"'][val='"+n[i]+"']").addClass("cur"),t=="rankA"||t=="rankB"?$(".all[tip='rank']").removeClass("cur"):$(".all[tip='"+t+"']").removeClass("cur")},CloseCum:function(){CusList.ClearCurCss();$("#addPopUp").hide()},ClearCurCss:function(){$("#custName").val("");$("#addPopUp .cur").removeClass("cur");$(".all").addClass("cur");$("#save").addClass("cur");$("#confirm").addClass("cur");$("#ulBrand").html("");$("#ulSeries").html("");$("#topDiv").children("p").remove();CusList._array.splice(0,CusList._array.length);CusList._arrayEdit.splice(0,CusList._arrayEdit.length);CusList.CancelCar()},CloseTip:function(){$("#TipPopUp").hide()},ConfirmCar:function(){var t,n;$(".transzoom").hide();$("#ulSeries").children(".cur").length==0&&$("#ulBrand").children(".cur").length==0?($("#brandBuxian").addClass("cur"),$(".subbrand-change").removeClass("cur")):(CusList._array.length>0&&CusList.ClearNameTopUl(CusList._array[0]),CusList._array.length>0&&CusList.ClearNameTopUl(CusList._array[0]),CusList._arrayEdit.length>0&&CusList.ClearNameTopUl(CusList._arrayEdit[0]),CusList._arrayEdit.length>0&&CusList.ClearNameTopUl(CusList._arrayEdit[0]),t=$("#ulBrand").children(".cur").html(),CusList.AddTopUI(t),CusList._array.push(t),n=$("#ulSeries").children(".cur").html(),n!="不限"&&(CusList.AddTopUI(n.trim()),CusList._array.push(n.trim())),CusList.AutoNameEvent($("#ulBrand").children(".cur").eq(0)));$(".subbrand").slideUp()},CancelCar:function(){$(".transzoom").hide();$(".subbrand").slideUp();$("#editCusId").val()!=""?(CusList._arrayEdit.length==1&&CusList.GetSeriesEdit(CusList._arrayEdit[0],"不限"),CusList._arrayEdit.length==2&&(CusList.GetBrandEdit(CusList._arrayEdit[0]),CusList.GetSeriesEdit(CusList._arrayEdit[0],CusList._arrayEdit[1]))):(CusList._array.length>0&&CusList.ClearNameTopUl(CusList._array[0]),CusList._array.length>0&&CusList.ClearNameTopUl(CusList._array[0]));CusList._arrayEdit.length==0&&($("#ulSeries").html(""),$("#ulBrand").children(".cur").removeClass("cur"),$("#brandBuxian").addClass("cur"),$(".subbrand-change").removeClass("cur"))},SaveCum:function(){var t,f,n;if($("#topDiv").children().length==1)return $("#errorMsg").html("请选择订阅条件"),setTimeout(function(){$("#errorMsg").html("")},3e3),!1;if(t=$.trim($("#custName").val()),t=="")return $("#errorMsg").html("请输入订阅名称"),setTimeout(function(){$("#errorMsg").html("")},3e3),!1;if(f=/^[0-9a-zA-Z\u4E00-\u9FA5\s\-\-]{1,10}$/g,!f.test(t))return $("#errorMsg").html("订阅名称仅支持汉字、数字、英文与空格，请修改后再次提交"),setTimeout(function(){$("#errorMsg").html("")},3e3),!1;if($("#editCusName").val()!=t&&CusList._arrayCsuName.in_array(t))return $("#errorMsg").html("您的订阅名称已存在"),setTimeout(function(){$("#errorMsg").html("")},3e3),!1;var e=$("#editCusId").val(),i=$(".cur[tip='brand']").attr("val"),r=$(".cur[tip='series']").attr("val"),o=CusList.GetJoinStr($(".cur[tip='paifang']")),s=CusList.GetJoinStr($(".cur[tip='rankA']")),h=CusList.GetJoinStr($(".cur[tip='rankB']")),c=CusList.GetJoinStr($(".cur[tip='year']")),l=CusList.GetJoinStr($(".cur[tip='regarea']")),a=CusList.GetJoinStr($(".cur[tip='root']")),u="";e==""?u="/AjaxCustomization/AddCustomization":(i==""&&CusList._arrayEdit.length==1&&(i=CusList._arrayEdit[0]),typeof r=="undefined"&&CusList._arrayEdit.length==2&&(i=CusList._arrayEdit[0],r=CusList._arrayEdit[1]),u="/AjaxCustomization/UpdateCustomization");n={};n.customization=t;n.custId=e;n.brand=i;n.series=r;n.emissionStandard=o;n.rankA=s;n.rankB=h;n.years=c;n.regarea=l;n.carLocation=a;$.ajax({type:"POST",url:u,data:n,async:!0,success:function(n){n==1&&(CusList.GetCumList(),CusList.ClearCurCss(),$("#addPopUp").hide(),CusList.TipMessageEvent("订阅成功"),setTimeout(function(){$("#TipPopUp").hide()},800))}})},DelCum:function(n){$("#delPopUp").show();$("#delNo").click(function(){$("#delPopUp").hide()});$("#delCusId").val(n)},DeleteEvent:function(){$.ajax({url:"/AjaxCustomization/DelCustomization",type:"post",async:!1,data:{cusId:$("#delCusId").val()},dataType:"json",success:function(n){n==1&&$("#delPopUp").hide();CusList.GetCumList()}})},ShowCumListHTML:function(n,t){var u=n[t].ParaValue.Brand,f=n[t].ParaValue.SeriesName,e=n[t].ParaValue.Regarea,h=n[t].ParaValue.ShowCarLocation,g=n[t].ParaValue.PaiFangDesc,c=n[t].ParaValue.RankLevel,o=n[t].ParaValue.RankLetter,nt=n[t].ParaValue.ShowYears,s=n[t].ParaValue.CustomizationId,i=0,tt,it,rt,ut,ft,et,ot,st,l,a,v,y,p,w,r="";u!=""&&u!=null&&(tt="<span>"+u+"<\/span>",i=i+1,r+=tt);f!=""&&f!=null&&(it="<span>"+f+"<\/span>",i=i+1,r+=it);e!=""&&e!=null&&(l=CusList.Split(e,","),i=i+l.length,rt=CusList.GetForeaStr(l),r+=rt);h!=""&&h!=null&&(a=CusList.Split(h,","),i=i+a.length,ut=CusList.GetForeaStr(a),r+=ut);g!=""&&(v=CusList.Split(g,","),i=i+v.length,ft=CusList.GetForeaStr(v),r+=ft);c!=""&&(y=CusList.Split(c,","),i=i+y.length,et=CusList.GetForeaStr(y),r+=et);o!=""&&(p=CusList.Split(o,","),i=i+p.length,ot=CusList.GetForeaStr(p),r+=ot);nt!=""&&(w=CusList.Split(nt,","),i=i+w.length,st=CusList.GetForeaStr(w),r+=st);var ht=n[t].ParaValue.Years=="0"?"":n[t].ParaValue.Years,ct=n[t].ParaValue.CarLocation,lt=n[t].ParaValue.EmissionStandard,vt="first="+n[t].ParaValue.FirstCode+"&Brand="+u+"&sname="+f+"&regarea="+e+"&root="+ct+"&paifang="+lt+"&rankA="+n[t].ParaValue.TradeRankLevel+"&rankB="+o+"&year="+ht,b="",k=n[t].ParaValue.Customization;CusList._arrayCsuName.push(k);b='<p class="fs16 c3 mt20">'+k+"<\/p>";var yt='<div class="mt20 sublabel pr" showTipCust="'+s+'">',pt='<p class="fs14 redit"><a href="javascript:;" class="ccheng" onclick="CusList.EditCum(this)" tipCustName="'+k+'" tipCustId="'+s+'" tipBrand="'+u+'" tipSName="'+f+'" tipReg="'+e+'" tipRoot="'+ct+'" tipPaifang="'+lt+'" tipRankA="'+c+'" tipRankB="'+o+'" tipYear="'+ht+'" >编辑<\/a><a href="javascript:;" onclick="CusList.DelCum(\''+s+'\');" class="ccheng ml25">删除<\/a><\/p><\/div> ',at='<div id="'+s+'" class="newcarlist clearfix mt15"><\/div>',d='<p class="mt20 bbs1"><\/p>';return n[t].CarList.length>0&&(d="<p class='fs14 tar mtie20'><a href='javascript:;'class='ccheng' onclick='CusList.GotoAuctionCenter(this);' condition="+vt+">查看全部>><\/a><\/p><p class='mt20 bbs1'><\/p>"),CusList._type==1?b+at+d:b+yt+r+pt+at+d},BindCarList:function(n){if(n!=null&&n.length>0)for(var t=0;t<n.length;t++)n[t].CarList!=null&&n[t].CarList.length>0?$("#CustCarListTemplate").tmpl(n[t].CarList).appendTo("#"+n[t].ParaValue.CustomizationId+""):$("#"+n[t].ParaValue.CustomizationId+"").removeClass("newcarlist clearfix mt15").addClass("nocar tac fs16").html(n[t].ErrorTipMessage)},GetBrandEdit:function(n){$.ajax({url:"/AjaxCustomization/GetBrandEdit",type:"post",data:{brand:n},sync:!1,success:function(t){var i=t;$("#ulBrand").html("");$("#NewBrandTemple").tmpl(i.data[0]).appendTo("#ulBrand");$("li[tip='brand'][val='"+n+"']").addClass("cur")}})},GetSeriesEdit:function(n,t){$.ajax({url:"/AjaxCustomization/GetSeriesEdit",type:"post",data:{brand:n},sync:!1,success:function(n){var i=n;$("#ulSeries").html("");$("#NewSeriesTemple").tmpl(i.data[0].Series).appendTo("#ulSeries");$("li[tip='series'][val='"+t+"']").addClass("cur");t=="不限"&&$("li[tip='series'][val='不限']").attr("val","")}})},WordClick:function(n){var t=$(n).html();$.ajax({url:"/AjaxCustomization/GetBrand",type:"post",data:{type:0,value:t},sync:!1,success:function(n){var i=n;t=="热门"?($("#ulBrand").html(""),$("#NewBrandTemple").tmpl(i.data).appendTo("#ulBrand")):($("#ulBrand").html(""),$("#NewBrandTemple").tmpl(i.data[0]).appendTo("#ulBrand"));$("#ulSeries").html("")}})},BrandClick:function(n){var i=$(n).html(),t;$(n).addClass("cur").siblings().removeClass("cur");t=$(n).html();$.ajax({url:"/AjaxCustomization/GetBrand",type:"post",data:{type:1,value:t},sync:!1,success:function(n){var t=n;$("#ulSeries").html("");$("#NewSeriesTemple").tmpl(t.data[0].Series).appendTo("#ulSeries");$("#ulSeries").children("li").eq(0).addClass("cur");$("#ulSeries").children("li").eq(0).attr("val","")}})},SeriesClick:function(n){$(n).addClass("cur").siblings().removeClass("cur")},Countdown:function(){var n=[];$("dl[aucid]").each(function(){var t;try{if(t=$(this).attr("aucid"),n.in_array(t))return!0;n.push(t);var u=parseInt($(".h_"+t).html(),10),i=parseInt($(".m_"+t).html(),10),r=parseInt($(".s_"+t).html(),10);if(u<=0&&i<=0&&r<=0)$("h_"+t).html("00"),$("m_"+t).html("00"),$("s_"+t).html("00"),$(".cust_car_"+t).addClass("end"),$(".cust_car_"+t+" .endbox").show(),$(".cust_car_"+t).removeAttr("onclick");else{r=r-1;r<0&&(r=59,i=i-1,i<0&&(i=59,u=u-1));var f=u.toString().length==1?"0"+u:u,e=i.toString().length==1?"0"+i:i,o=r.toString().length==1?"0"+r:r;$(".h_"+t+"").html(f);$(".m_"+t+"").html(e);$(".s_"+t+"").html(o)}}catch(s){}})},GetForeaStr:function(n){for(var i="",t=0;t<n.length;t++)i+="<span>"+n[t]+"<\/span>";return i},GotoCum:function(){window.open("/Customization/Index")},GotoDetail:function(n){var t=$(n).attr("desaucid");window.open("/cardetail/"+t)},GotoAuctionCenter:function(n){var t=$(n).attr("condition");$.cookie("condition",t,{path:"/",expires:1,domain:"cheyipai.com"});window.open("/auction")},Split:function(n,t){return n.split(t)},GetJoinStr:function(n){var t="",i=0,r=n.length;return n.each(function(){t+=r-1==i?$(this).attr("val"):$(this).attr("val")+",";i++}),t}},myCyp={Init:function(){myCyp.GetOrderCount();$(".recharge").click(function(){$.ajax({type:"post",url:config._domain+"/AjaxCommon/GetAuditStatus",dataType:"json",success:function(n){if(n.MsgCode==200)if(n.AuditStatus!=30){var t="<p class='ml40 pt20 pb25 fs20'>为保障您的资金安全，充值保证金前请先进行&nbsp;&nbsp;<a href='"+config._domain+"/BusinessCenter/Account?tab=2' class='btn hoverwhite fs18 lh40 pr20 pl20 bgcheng mr40'>实名认证<\/a><\/p>";TipDialog(t)}else $("#formrecharge").submit()}})});$("#close").click(function(){$("#mycypmsg").addClass("hide")});$(".userpho dt").mouseover(function(){$(".togphoto").show()}).mouseout(function(){$(".togphoto").hide()});$(".togphoto").click(function(){$(".headimage").show()});$(".js-popup-hide").click(function(){$(".popupbox,.headimage").hide()});$(".btnHeadImg").click(function(){var n=$("#logo").attr("HeadImg"),t=$("#logo").attr("HeadImageUrl");$.ajax({type:"post",url:config._domain+"/AjaxCommon/UpdateHeadImg?headImg="+n,dataType:"text",success:function(i){i>0?(n!=""&&$(".photo").attr("src",t+n),$(".headimage").hide()):(ComAlert("头像保存失败！"),$(".headimage").hide())},error:function(){}})});$("#logo").change(function(){var t,i,r,n;$("#logo").val().toUpperCase().lastIndexOf(".JPG")>=0||$("#logo").val().toUpperCase().lastIndexOf(".GIF")>=0||$("#logo").val().toUpperCase().lastIndexOf(".PNG")>=0||$("#logo").val().toUpperCase().lastIndexOf(".JPEG")>=0?(t=0,$.browser.msie?(i=new Image,i.src=$("#logo").val(),i.fileSize>3072?ComAlert("图片不大于3MB。"):(n={type:"post",url:config._domain+"/AjaxCommon/SaveHeadImg",datatype:"script",success:function(n){n=JSON.parse(n);var t=$("#logo").attr("HeadImageUrl");$("#logo").attr("HeadImg",n);$(".userimg").attr("src",t+n)}},$("#formlogo").ajaxSubmit(n))):(t=this.files[0].size,r=t/1024,r>3072?ComAlert("图片不大于3MB。"):(n={type:"post",url:config._domain+"/AjaxCommon/SaveHeadImg",datatype:"json",success:function(n){n=JSON.parse(n);var t=$("#logo").attr("HeadImageUrl");$("#logo").attr("HeadImg",n);$(".userimg").attr("src",t+n)}},$("#formlogo").ajaxSubmit(n)))):ComAlert("图片上传格式不正确！")});myCyp.GetSXTMSG()},GetOrderCount:function(){$.ajax({url:config._domain+"/AjaxMyCYP/GetNewOrderCount",type:"post",dataType:"json",success:function(n){var t=n.order,i=n.voucher;$("#sureCarnum").html(t.totalConfirm);$("#nopaymentnum").html(t.totalPendingpay);$("#deliverying").html(t.totalProcessing);$("#dealClose").html(t.totalCompletion);$(".totalVoucher").html(i.SumNum+"元");$(".leftVoucher").html(i.OverdueNum+"元");$(".saleMoney").html(n.saleMoney+"元");$(".commissionMonty").html(n.commissionMonty+"元")}})},GetSXTMSG:function(){$.ajax({url:config._domain+"/AjaxFinance/GetCreditList",type:"POST",data:{limit:10,offset:0},dataType:"json",success:function(n){if(n.resultCode==1e4&&n.Data.sxtList!=undefined&&n.Data.sxtList!=null&&n.Data.sxtList!=undefined){var t=n.Data.sxtList;$("#dvSXT").show();$("#tdYHmoney").html(t[0].engrossLimit+"元");$("#tdUsemoney").html(t[0].usableLimit+"元")}}})}}